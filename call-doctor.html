<!doctype html>
<html lang="ar" dir="rtl" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Smart Clinic OS โ Doctor Call</title>
  <link rel="stylesheet" href="ar.css" />
</head>
<body>
<header class="topbar">
  <div class="brand">
    <div class="logo">๐จโโ๏ธ</div>
    <div>
      <b>ุงูุทุจูุจ โ ุงุชุตุงู ุงููุดู</b>
      <small>WebRTC (ูุฌุงูู ุจุฏูู ุณูุฑูุฑ: ููุณ ุงูุฌูุงุฒ/ุชุจููุจูู)</small>
    </div>
  </div>
  <div class="actions">
    <a class="btn ghost" href="doctor.html">๐จโโ๏ธ ุฑุฌูุน ููุทุจูุจ</a>
    <button class="btn" id="btnJoin">ุฏุฎูู ุงูุบุฑูุฉ</button>
  </div>
</header>

<div class="wrap">
  <div class="panel">
    <div class="h">
      <h2>Room</h2>
      <div class="muted" id="st">Idle</div>
    </div>

    <div class="row">
      <span class="badge">Room ID: <b id="roomTxt">โ</b></span>
    </div>

    <div class="sep"></div>

    <div class="grid" style="grid-template-columns:1fr 1fr;">
      <div class="panel">
        <div class="h"><h2>ุงูุทุจูุจ (ุฃูุช)</h2><div class="muted">Local</div></div>
        <video id="vLocal" autoplay playsinline muted style="width:100%; border-radius:18px; border:1px solid var(--stroke);"></video>
      </div>
      <div class="panel">
        <div class="h"><h2>ุงููุดู</h2><div class="muted">Remote</div></div>
        <video id="vRemote" autoplay playsinline style="width:100%; border-radius:18px; border:1px solid var(--stroke);"></video>
      </div>
    </div>

    <div class="sep"></div>
    <div class="small">
      ุงูุชุญ ุตูุญุฉ ุงููุดู ุฃููุงู ูุงุจุฏุฃ ุงูุงุชุตุงู ููุงูุ ุซู ุงุถุบุท โุฏุฎูู ุงูุบุฑูุฉโ ููุง.
    </div>
  </div>
</div>

<script src="webrtc-local.js"></script>
<script>
(function(){
  const $ = (s)=>document.querySelector(s);
  const room = new URLSearchParams(location.search).get("room") || "UNKNOWN";
  $("#roomTxt").textContent = room;

  $("#btnJoin").addEventListener("click", async ()=>{
    $("#st").textContent = "Joiningโฆ";
    try{
      await window.SCWEBRTC.initDoctor(room, {
        localVideo: $("#vLocal"),
        remoteVideo: $("#vRemote"),
        status: $("#st")
      });
    }catch(e){
      console.error(e);
      alert("ูุดู ุงูุงูุถูุงู. ุชุฃูุฏ ูู ุงูุณูุงุญ ุจุงููุงููุฑุง/ุงููุงูู ูุฃู ุตูุญุฉ ุงููุดู ูุชุญุช ุงูุงุชุตุงู.");
    }
  });
})();
</script>
</body>
</html>
