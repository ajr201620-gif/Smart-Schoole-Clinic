<!doctype html>
<html lang="ar" dir="rtl" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ุจูุงุจุฉ ุงูุทุจูุจ โ ุงูุนูุงุฏุฉ ุงููุฏุฑุณูุฉ ุงูุฐููุฉ</title>
  <link rel="stylesheet" href="app.css" />
</head>

<body data-page="doctor">
  <header class="topbar">
    <div class="topbar__left">
      <a class="btn ghost" href="index.html">โต ุงูุฑุฆูุณูุฉ</a>
      <div class="brand mini">
        <div class="brand__logo">๐ฉบ</div>
        <div class="brand__txt">
          <div class="brand__name">ุจูุงุจุฉ ุงูุทุจูุจ</div>
          <div class="brand__sub">ูุฑุงุฌุนุฉ ุงูุญุงูุฉ โข ูุฑุงุฑ โข ุชูุงุฑูุฑ โข ุฒูุงุฑุฉ ุงูุชุฑุงุถูุฉ</div>
        </div>
      </div>
    </div>

    <div class="topbar__right">
      <div class="pill">ูุฑุญุจูุง: <b data-user-name>ุทุจูุจ</b></div>
      <button class="btn ghost" id="btnTheme">๐</button>
    </div>
  </header>

  <main class="shell">
    <section class="grid2">
      <!-- Left: Case Overview -->
      <div class="card pad">
        <div class="card__title">๐ ุจูุงูุงุช ุงูุญุงูุฉ</div>
        <div class="muted">ูุฐู ุขุฎุฑ ุญุงูุฉ ุชู ุฅูุดุงุคูุง (Demo). ูุงุญููุง ุชุฑุจุทูุง ุจูุงุนุฏุฉ ุจูุงูุงุช.</div>

        <div class="block">
          <div class="label">ุงูุดููู</div>
          <div class="box" id="doctorComplaint">โ</div>
        </div>

        <div class="hr"></div>

        <div class="card__title">๐ ุงูููุงุณุงุช</div>
        <div class="kpis">
          <div class="kpi"><div class="kpi__label">HR</div><div class="kpi__val" id="docHR">โ</div></div>
          <div class="kpi"><div class="kpi__label">Temp</div><div class="kpi__val" id="docTemp">โ</div></div>
          <div class="kpi"><div class="kpi__label">SpO2</div><div class="kpi__val" id="docSpO2">โ</div></div>
          <div class="kpi"><div class="kpi__label">BP</div><div class="kpi__val" id="docBP">โ</div></div>
        </div>

        <div class="row actions">
          <button class="btn ghost" id="btnRequestSecondReading" data-action="doctor:requestSecondReading">
            ๐ ุทูุจ ูุฑุงุกุฉ ุซุงููุฉ
          </button>
          <button class="btn ghost" id="btnDoctorAiSuggest" data-action="doctor:aiSuggest">
            ๐ง ูุณุงุนุฏ ุงูุทุจูุจ (AI)
          </button>
        </div>

        <div class="hr"></div>

        <div class="card__title">๐ง AI Triage (ูู ุงูุทุงูุจ)</div>
        <div class="kpis">
          <div class="kpi"><div class="kpi__label">Risk</div><div class="kpi__val" id="docRisk">โ</div></div>
          <div class="kpi"><div class="kpi__label">Priority</div><div class="kpi__val" id="docPriority">โ</div></div>
          <div class="kpi"><div class="kpi__label">Visit</div><div class="kpi__val" id="docVisitState">โ</div></div>
          <div class="kpi"><div class="kpi__label">Mode</div><div class="kpi__val">Doctor</div></div>
        </div>

        <div class="block">
          <div class="label">ุชูุตูุฉ AI</div>
          <pre class="pre" id="docAiRec">โ</pre>
        </div>
      </div>

      <!-- Right: Actions + Plan -->
      <div class="card pad">
        <div class="card__title">๐ฅ ุฅุฏุงุฑุฉ ุงูุฒูุงุฑุฉ ุงูุงูุชุฑุงุถูุฉ</div>
        <div class="muted">ุงูุจู/ุงุฑูุถ/ุงุทูุจ ุงูุถูุงู ููู ุงูุฃูุฑ/ุงุทูุจ ููุงููุฉ ุฅุฌุฑุงุก.</div>

        <div class="row actions">
          <button class="btn solid" id="btnApproveVisit" data-action="doctor:approveVisit">โ ูุจูู ุงูุฒูุงุฑุฉ</button>
          <button class="btn ghost" id="btnRejectVisit" data-action="doctor:rejectVisit">โ ุฑูุถ ุงูุฒูุงุฑุฉ</button>
        </div>

        <div class="row actions">
          <button class="btn ghost" id="btnJoinParent" data-action="doctor:joinParent">๐จโ๐ฉโ๐ง ุทูุจ ุงูุถูุงู ููู ุงูุฃูุฑ</button>
          <button class="btn ghost" data-action="doctor:makeDecision" data-decision="ูุชุทูุจ ููุงููุฉ ุฅุฌุฑุงุก">๐ ุทูุจ ููุงููุฉ ุฅุฌุฑุงุก</button>
        </div>

        <div class="hr"></div>

        <div class="card__title">๐งพ ุงูุชุดุฎูุต ูุงูุฎุทุฉ</div>
        <div class="form">
          <div class="field">
            <label>ุงูุชุดุฎูุต</label>
            <input id="doctorDiagnosis" class="input" placeholder="ูุซุงู: ุงูุชูุงุจ ุชููุณู ุนููู" />
          </div>

          <div class="field">
            <label>ุงูุฎุทุฉ/ุงูุชูุตูุฉ ุงูุทุจูุฉ</label>
            <textarea id="doctorPlan" class="input area" rows="4" placeholder="ุฎุงูุถ ุญุฑุงุฑุฉ + ุณูุงุฆู + ูุชุงุจุนุฉ..."></textarea>
          </div>

          <div class="row actions">
            <button class="btn solid" id="btnSaveDiagnosis" data-action="doctor:saveDiagnosis">๐พ ุญูุธ</button>
            <button class="btn ghost" id="btnMarkFollowup" data-action="doctor:markFollowup">๐ ุชุญุชุงุฌ ูุชุงุจุนุฉ</button>
            <button class="btn ghost" id="btnResolveCase" data-action="doctor:resolveCase">โ ุฅุบูุงู ุงูุญุงูุฉ</button>
          </div>
        </div>

        <div class="hr"></div>

        <div class="card__title">โก ูุฑุงุฑุงุช ุณุฑูุนุฉ</div>
        <div class="row actions">
          <button class="btn ghost" data-action="doctor:makeDecision" data-decision="ุฑุงุญุฉ ุงูููู ุงูุฏุฑุงุณู">๐ ุฑุงุญุฉ</button>
          <button class="btn ghost" data-action="doctor:makeDecision" data-decision="ุนูุฏุฉ ูููุตู ูุน ูุชุงุจุนุฉ">๐ซ ุนูุฏุฉ ูููุตู</button>
          <button class="btn ghost" data-action="doctor:makeDecision" data-decision="ุฅุญุงูุฉ ูููุฑูุฒ ุงูุตุญู">๐ฅ ุฅุญุงูุฉ</button>
          <button class="btn ghost" data-action="doctor:makeDecision" data-decision="ุชุญููู ุทูุงุฑุฆ">๐ ุทูุงุฑุฆ</button>
        </div>

        <div class="hr"></div>

        <div class="card__title">๐ง Copilot Output</div>
        <textarea id="doctorCopilotBox" class="input area" rows="8" placeholder="ุงุถุบุท ูุณุงุนุฏ ุงูุทุจูุจ (AI) ูุชูููุฏ ูุญุชูู ููุง..."></textarea>

        <div class="row actions">
          <a class="btn ghost" href="visit.html">๐ฅ ูุชุญ ุบุฑูุฉ ุงูุฒูุงุฑุฉ</a>
          <a class="btn ghost" href="admin.html">๐ซ ููุญุฉ ุงูุฅุฏุงุฑุฉ</a>
          <a class="btn ghost" href="parent.html">๐จโ๐ฉโ๐ง ููู ุงูุฃูุฑ</a>
        </div>
      </div>
    </section>
  </main>

  <!-- Scripts -->
  <script src="bus.js"></script>
  <script src="auth.js"></script>
  <script src="app-init.js"></script>
  <script src="sensor-sim.js"></script>
  <script src="triage-ai.js"></script>
  <script src="doctor-copilot.js"></script>
  <script src="visit-session.js"></script>
  <script src="app.js"></script>
  <script src="actions.js"></script>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const btn = document.getElementById("btnTheme");
      btn?.addEventListener("click", () => {
        const html = document.documentElement;
        const isDark = html.getAttribute("data-theme") !== "light";
        html.setAttribute("data-theme", isDark ? "light" : "dark");
      });
    });
  </script>
    <!-- ุจุงูู ุณูุฑุจุชุงุชู -->
  <script src="./actions.js"></script>

  <!-- Firebase (ูุงุฒู ุขุฎุฑ ุดูุก ููุจู </body>) -->
  <script type="module" src="./firebase-init.js"></script>
</body>
</html>
