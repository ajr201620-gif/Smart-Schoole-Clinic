<!doctype html>
<html lang="ar" dir="rtl" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Smart Clinic OS โ ุจูุงุจุฉ ุงูุฏุฎูู</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>

  <!-- Topbar -->
  <header class="topbar">
    <div class="brand">
      <div class="logo">SC</div>
      <div>
        <div class="brand-title">Smart Clinic OS</div>
        <div class="brand-sub">Role Gateway โ ุจูุงุจุฉ ุงูุฃุฏูุงุฑ</div>
      </div>
    </div>

    <div class="top-actions">
  <button class="btn ghost" id="btnTheme">๐</button>
</div>
  </header>

  <main class="main" style="max-width:1100px; margin:0 auto;">

    <section class="hero" style="margin-top:22px;">
      <div class="hero-left">
        <div class="kicker">๐ง + ๐ซ + ๐ฉบ</div>
        <h1>ุงูุนูุงุฏุฉ ุงููุฏุฑุณูุฉ ุงูุฐููุฉ</h1>
        <p class="hero-desc">
          ูุธุงู ูุชุนุฏุฏ ุงูุฃุฏูุงุฑ: ุฅุฏุงุฑุฉ ุงููุฏุฑุณุฉุ ุงูุนูุงุฏุฉ (ุทุจูุจ/ุชูุฑูุถ)ุ ุงูุทุงูุจุ ููู ุงูุฃูุฑ โ ูุน ุตูุงุญูุงุช (RBAC) ูุณุฌู ุชุฏููู (Audit) (Demo).
        </p>

        <div class="hero-badges">
          <span class="badge">GitHub Pages Ready</span>
          <span class="badge ghost">Static Demo</span>
          <span class="badge">Multi-Role</span>
        </div>

        <div class="divider"></div>

        <div class="form" style="max-width:520px;">
          <label>ุงุฎุชุฑ ุงูุฏูุฑ</label>
          <div class="row" style="grid-template-columns:1fr 1fr;">
            <button class="btn ghost roleBtn" data-role="school" data-go="admin.html">๐ซ ุฅุฏุงุฑุฉ ุงููุฏุฑุณุฉ</button>
            <button class="btn ghost roleBtn" data-role="staff" data-go="doctor.html">๐จโโ๏ธ ุงูุทุจูุจ/ุงูุชูุฑูุถ</button>
            <button class="btn ghost roleBtn" data-role="student" data-go="student.html">๐ ุงูุทุงูุจ</button>
            <button class="btn ghost roleBtn" data-role="parent" data-go="parent.html">๐จโ๐ฉโ๐ง ููู ุงูุฃูุฑ</button>
          </div>

          <div class="divider"></div>

          <div class="row" style="grid-template-columns:1fr 1fr;">
            <div>
              <label>ุขุฎุฑ ุฏูุฑ</label>
              <input id="lastRole" readonly placeholder="โ" />
            </div>
            <div>
              <label>PIN (ุงุฎุชูุงุฑู Demo)</label>
              <input id="pin" placeholder="1234" inputmode="numeric" />
            </div>
          </div>

          <div class="card-actions" style="padding:0;">
            <button class="btn" id="btnEnter">ุฏุฎูู</button>
            <button class="btn ghost" id="btnReset">ุฅุนุงุฏุฉ ุถุจุท (Demo)</button>
          </div>

          <div class="muted small" style="margin-top:10px; line-height:1.8;">
            * PIN ุงุฎุชูุงุฑู ููุนุฑุถ:  
            <b>ุฅุฏุงุฑุฉ:</b> 1111 โ <b>ุทุจูุจ:</b> 2222 โ <b>ุทุงูุจ:</b> 3333 โ <b>ููู ุฃูุฑ:</b> 4444
          </div>
        </div>
      </div>

      <div class="hero-right">
        <div class="scorecard">
          <div class="scorecard-head">
            <div>
              <div class="score-title">ุฌุงูุฒูุฉ ุงูุนุฑุถ</div>
              <div class="score-sub">ุฃุฏูุงุฑ + ุตูุญุงุช + ุชุฏูู</div>
            </div>
            <div class="ring">
              <div class="ring-inner">
                <div class="ring-num">100</div>
                <div class="ring-lbl">%</div>
              </div>
            </div>
          </div>

          <div class="scorecard-grid">
            <div class="mini">
              <div class="mini-k">Admin</div>
              <div class="mini-v">โ</div>
            </div>
            <div class="mini">
              <div class="mini-k">Doctor</div>
              <div class="mini-v">โ</div>
            </div>
            <div class="mini">
              <div class="mini-k">Student</div>
              <div class="mini-v">โ</div>
            </div>
            <div class="mini">
              <div class="mini-k">Parent</div>
              <div class="mini-v">โ</div>
            </div>
          </div>

          <div class="divider"></div>

          <div class="muted small" style="line-height:1.9;">
            ูุตูุญุฉ ุนุฑุถ ููุญููุงู: ุงูุชุญ โูุถุน ุงูุชุญูููโ ูุดุบูู ุงูุฃุฏูุงุฑ ูุงุญุฏ ูุงุญุฏ.
          </div>
        </div>

        <div class="card" id="judgePanel" style="display:none; margin-top:14px;">
          <div class="card-head">
            <h3>ูุถุน ุงูุชุญููู</h3>
            <div class="muted small">ุฑูุงุจุท ูุจุงุดุฑุฉ</div>
          </div>

          <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px;">
            <a class="btn ghost" href="admin.html">๐ซ Admin</a>
            <a class="btn ghost" href="doctor.html">๐จโโ๏ธ Doctor</a>
            <a class="btn ghost" href="student.html">๐ Student</a>
            <a class="btn ghost" href="parent.html">๐จโ๐ฉโ๐ง Parent</a>
          </div>

          <div class="divider"></div>

          <div class="muted small">
            ุฅุฐุง ุงุญุชุฌุช โResetโ ุงูุณุญ LocalStorage ูู ุฒุฑ ุฅุนุงุฏุฉ ุงูุถุจุท.
          </div>
        </div>

      </div>
    </section>

    <section class="views" style="margin-top:18px;">
      <section class="view show">
        <div class="grid-2">
          <div class="card">
            <div class="card-head">
              <h3>ููู ูุดุชุบู (ุจุงุฎุชุตุงุฑ)</h3>
              <div class="muted small">Flow</div>
            </div>
            <ul class="bullets">
              <li>ุชุฎุชุงุฑ ุงูุฏูุฑ โ ููููู ูููุงุฌูุฉ ุงูููุงุณุจุฉ.</li>
              <li>ูุญูุธ ุขุฎุฑ ุฏูุฑ ูุงุณุชุฎุฏุงู โุฏุฎูู ุณุฑูุนโ.</li>
              <li>PIN ุงุฎุชูุงุฑู ููุชุฌุฑุจุฉ ููุท.</li>
              <li>ูู ุตูุญุฉ ุชุณุฌู ุฃุญุฏุงุซูุง ูู Audit (ุฅุฐุง ูููุงุชู ููุนูุฉ).</li>
            </ul>
          </div>

          <div class="card">
            <div class="card-head">
              <h3>ุชุดุบูู ุนูู GitHub Pages</h3>
              <div class="muted small">No server</div>
            </div>
            <ul class="bullets">
              <li>ุงุฑูุน ุงููููุงุช ูู Repo</li>
              <li>ูุนูู Pages โ Branch: main / root</li>
              <li>ุงูุชุญ ุงูุฑุงุจุทุ ูุงุจุฏุฃ ูู index.html</li>
            </ul>
          </div>
        </div>
      </section>
    </section>

  </main>

  <script>
    (function(){
      const ROLE_KEY = "sc_role";
      const LAST_KEY = "sc_last_role";
      const LAST_GO = "sc_last_go";

      const $ = (s,r=document)=>r.querySelector(s);
      const $$ = (s,r=document)=>Array.from(r.querySelectorAll(s));

      const PINS = {
        school: "1111",
        staff: "2222",
        student: "3333",
        parent: "4444"
      };

      function setLast(){
        const r = localStorage.getItem(LAST_KEY) || "โ";
        $("#lastRole").value = r;
      }
      setLast();

      // Theme
      $("#btnTheme")?.addEventListener("click", ()=>{
        const html = document.documentElement;
        html.dataset.theme = html.dataset.theme === "light" ? "dark" : "light";
      });

      // Judge
      $("#btnJudge")?.addEventListener("click", ()=>{
        const p = $("#judgePanel");
        p.style.display = (p.style.display === "none") ? "" : "none";
      });

      // remember selection
      let selected = null;

      $$(".roleBtn").forEach(btn=>{
        btn.addEventListener("click", ()=>{
          $$(".roleBtn").forEach(b=>b.classList.remove("active"));
          btn.classList.add("active");
          selected = { role: btn.dataset.role, go: btn.dataset.go };
          localStorage.setItem(LAST_KEY, selected.role);
          localStorage.setItem(LAST_GO, selected.go);
          $("#lastRole").value = selected.role;
        });
      });

      // Continue
      $("#btnContinue")?.addEventListener("click", ()=>{
        const go = localStorage.getItem(LAST_GO);
        const role = localStorage.getItem(LAST_KEY);
        if(!go || !role){
          alert("ุงุฎุชุฑ ุฏูุฑ ุฃููุงู ๐");
          return;
        }
        localStorage.setItem(ROLE_KEY, role);
        location.href = go;
      });

      function enter(){
        if(!selected){
          // fallback last
          const go = localStorage.getItem(LAST_GO);
          const role = localStorage.getItem(LAST_KEY);
          if(go && role){
            selected = { role, go };
          } else {
            alert("ุงุฎุชุฑ ุงูุฏูุฑ ุฃููุงู ๐");
            return;
          }
        }

        const pin = ($("#pin").value || "").trim();
        // PIN optional; if provided must match
        if(pin && pin !== (PINS[selected.role] || "")){
          alert("PIN ุบูุฑ ุตุญูุญ (Demo) โ");
          return;
        }

        localStorage.setItem(ROLE_KEY, selected.role);
        localStorage.setItem(LAST_KEY, selected.role);
        localStorage.setItem(LAST_GO, selected.go);
        location.href = selected.go;
      }

      $("#btnEnter")?.addEventListener("click", enter);

      $("#pin")?.addEventListener("keydown", (e)=>{
        if(e.key === "Enter") enter();
      });

      $("#btnReset")?.addEventListener("click", ()=>{
        if(!confirm("ุฅุนุงุฏุฉ ุถุจุท ุจูุงูุงุช ุงูุฏููู (LocalStorage)ุ")) return;
        localStorage.clear();
        $("#pin").value = "";
        $("#lastRole").value = "โ";
        selected = null;
        alert("ุชู โ");
      });
    })();
  </script>
</body>
</html>
